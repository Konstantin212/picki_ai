---
description: Main instruction file with explanation of all modules and code principles
globs:
alwaysApply: true
---

# Picki AI Project Rules

## Overview

This is a Next.js 15 application built with TypeScript, React 19, Tailwind CSS, and Supabase. The project uses modern development practices including ESLint, Prettier, and Husky for code quality. The application features Next.js 15's built-in internationalization with server-side translations and locale-aware routing.

## Project Structure

The project rules are organized into focused instruction files for better readability and usage:

### ğŸ“‹ [Technology Stack](./technology-stack.mdc)

- Core technologies and dependencies
- Version information and package details
- Development tools and configurations

### ğŸ¨ [Code Style & Conventions](./code-style.mdc)

- TypeScript configuration and best practices
- React component patterns and "use client" directive
- Styling guidelines with Tailwind CSS and SCSS modules
- Common code patterns and templates

### ğŸ—ï¸ [Project Architecture](./architecture.mdc)

- File organization and directory structure
- Page descriptions and component architecture
- State management patterns
- Authentication and API structure
- **Internationalization (i18n)**: Next.js 15 locale routing and server-side translations

### ğŸŒ [Internationalization](./internationalization.mdc)

- Next.js 15 i18n implementation with locale routing
- Server-side translation loading and usage patterns
- Domain-based translation file organization
- Language switching and locale detection
- Migration from client-side i18next to server-side approach

### ğŸª [Custom Hooks](./hooks.mdc)

- Available custom hooks documentation
- Hook development guidelines
- Usage examples and best practices
- Testing and performance considerations

### âš™ï¸ [Development Workflow](./development-workflow.mdc)

- Environment setup and development process
- Code quality and testing strategies
- Security and performance best practices
- Available scripts and tools

### ğŸ“ [Committing](./committing.mdc)

- Commit message standards and best practices
- Pre-commit hook requirements and error handling
- Version control workflow guidelines
- Clean commit history maintenance

### ğŸ¨ [Design System](./design-system.mdc)

- **MANDATORY**: Design system documentation and guidelines
- Color palette, typography, and layout patterns
- Component design patterns and interactive elements
- Accessibility guidelines and responsive design principles
- Implementation patterns and best practices
- **REQUIRED**: Follow before creating or updating any frontend functionality

## Quick Start

1. **MANDATORY**: Review the [Design System](./design-system.mdc) before any frontend work
2. Review the [Technology Stack](./technology-stack.mdc) for dependencies
3. Follow [Code Style & Conventions](./code-style.mdc) for development
4. Understand [Project Architecture](./architecture.mdc) for file organization
5. Learn [Internationalization](./internationalization.mdc) patterns for i18n
6. Use [Custom Hooks](./hooks.mdc) for common functionality
7. Follow [Development Workflow](./development-workflow.mdc) for best practices
8. Adhere to [Committing](./committing.mdc) standards for version control

## Key Features

### Next.js 15 i18n Implementation

- **Locale Routing**: `/{locale}/{page}` URL structure (e.g., `/en/profile`, `/de/login`)
- **Server-Side Translations**: All translations loaded server-side for better performance
- **Automatic Detection**: Browser language detection with fallback to English
- **SEO Optimized**: Each locale has its own URL for better search engine indexing
- **Type Safety**: Full TypeScript support for translation dictionaries

### Translation Structure

```
src/messages/
â”œâ”€â”€ en/                    # English translations
â”‚   â”œâ”€â”€ common.json       # Shared UI elements
â”‚   â”œâ”€â”€ home.json         # Home page content
â”‚   â”œâ”€â”€ navigation.json   # Navigation labels
â”‚   â”œâ”€â”€ auth.json         # Authentication forms
â”‚   â”œâ”€â”€ profile.json      # Profile page content
â”‚   â”œâ”€â”€ errors.json       # Error messages
â”‚   â”œâ”€â”€ start.json        # Start page content
â”‚   â”œâ”€â”€ recommend.json    # Recommendation interface
â”‚   â””â”€â”€ results.json      # Results display
â”œâ”€â”€ de/                    # German translations (same structure)
â””â”€â”€ uk/                    # Ukrainian translations (same structure)
```

### Usage Examples

#### Server Components (Pages)

```tsx
// src/app/[lang]/page.tsx
export default async function HomePage({
  params,
}: {
  params: Promise<{ lang: 'en' | 'de' | 'uk' }>;
}) {
  const { lang } = await params; // Next.js 15 requires awaiting params
  const dict = await getDictionary(lang);

  return (
    <div>
      <h1>{dict.home.heroTitle}</h1>
      <p>{dict.home.heroDescription}</p>
      <Navbar dict={dict} />
    </div>
  );
}
```

#### Client Components

```tsx
// Components receive translations as props
interface NavbarProps {
  dict: any; // Translation dictionary
  session?: Session | null;
}

export const Navbar = ({ dict, session }: NavbarProps) => {
  return (
    <nav>
      <span>{dict.nav.home}</span>
      <LanguageSwitcher />
    </nav>
  );
};
```

#### Language Switching

```tsx
// src/components/navigation/LanguageSwitcher.tsx
export const LanguageSwitcher = () => {
  const router = useRouter();
  const pathname = usePathname();

  const handleChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
    const newLocale = e.target.value;
    const currentLocale = pathname.split('/')[1];
    const newPath = pathname.replace(`/${currentLocale}`, `/${newLocale}`);
    router.push(newPath);
  };

  return (
    <select onChange={handleChange}>
      <option value="en">English</option>
      <option value="de">Deutsch</option>
      <option value="uk">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
    </select>
  );
};
```

## Frontend Development Requirements

### **MANDATORY DESIGN SYSTEM COMPLIANCE**

Before creating or updating any frontend functionality, you **MUST**:

1. **Review Design Documentation**: Read and understand the [Design System](./design-system.mdc) documentation
2. **Follow Color Palette**: Use the established gray-900/gray-800 dark theme with blue/purple accents
3. **Apply Typography System**: Use proper font hierarchy and spacing (8px grid system)
4. **Implement Layout Patterns**: Follow the established card and container patterns
5. **Ensure Accessibility**: Implement proper focus states, ARIA labels, and contrast ratios
6. **Test Responsiveness**: Ensure mobile-first responsive design
7. **Use Component Patterns**: Follow established form field, button, and card patterns
8. **Apply Animations**: Use consistent transition durations (200-300ms)

### Design System Enforcement

- **Color Usage**: Only use colors from the established palette (gray-900, gray-800, blue-600, purple-600, etc.)
- **Typography**: Follow the typography hierarchy (text-2xl for titles, text-sm for labels, etc.)
- **Spacing**: Use the 8px grid system (space-y-2, space-y-4, space-y-6, etc.)
- **Components**: Use established patterns for forms, buttons, cards, and interactive elements
- **Accessibility**: Implement proper semantic HTML, focus management, and ARIA attributes
- **Performance**: Optimize for Core Web Vitals and implement proper loading states

### Quick Reference

For rapid development, use the [Cursor Quick Reference](./cursor-quick-reference.mdc) which contains:

- Page and component templates
- Common class combinations
- Implementation patterns
- Troubleshooting guides

## Notes

- This project uses modern React patterns and Next.js 15 features
- **Next.js 15 Params**: Always await `params` before destructuring in Next.js 15
- **Server-Side i18n**: All translations are loaded server-side for better performance
- **Locale Routing**: Use Next.js built-in locale routing for better SEO and performance
- **Design System**: **MANDATORY** - Follow the design system for all frontend work
- Maintain consistency with the existing codebase
- Follow the established patterns for new features
- Keep dependencies up to date and secure
- Test all supported locales when adding new features
